import{r as R,c as b,a as p,o as l,b as c,d as o,e as h,F as $,S as F,f as O,M as T,w as v,v as w,g as P,t as u,n as j,h as S,i as C,p as k,j as A,k as K,l as W,m as G,q as Y,s as Q,u as J,x as I,y as X,z as Z,A as ee}from"./vendor.81f5fa88.js";const te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}};te();const d=R({user:{},account:{},arrangement:null,flowers:[]});var m=(n,e)=>{for(const[t,r]of e)n[t]=r;return n};const oe={name:"App",setup(){return{appState:b(()=>d)}}},ne=o("header",null,null,-1),re=o("footer",null,null,-1);function se(n,e,t,r,s,i){const a=p("router-view");return l(),c($,null,[ne,o("main",null,[h(a)]),re],64)}var ae=m(oe,[["render",se]]);class g{static async confirm(e="Are you sure?",t="You won't be able to revert this!",r="warning",s="Yes, delete it!"){try{return!!(await F.fire({title:e,text:t,icon:r,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:s})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",r="top-end",s=3e3,i=!0){F.fire({title:e,icon:t,position:r,timer:s,timerProgressBar:i,toast:!0,showConfirmButton:!1})}static error(e){var t;if(e.isAxiosError){const{response:r}=e;this.toast(((t=r.data.error)==null?void 0:t.message)||r.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const M=window.location.origin.includes("localhost"),N=M?"http://localhost:3000":"";function y(n,e){if(M)console[n](`[${n}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(n){case"log":case"assert":return}console[n](`[${n}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const f={log(){y("log",arguments)},error(){y("error",arguments)},warn(){y("warn",arguments)},assert(){y("assert",arguments)},trace(){y("trace",arguments)}};class ie{createArrangement(e){d.arrangement=e}clear(){d.arrangement=null,d.flowers=[]}}const L=new ie,le={setup(){const n=O({budget:null});return{editable:n,createArrangement(){try{L.clear(),L.createArrangement(n.value),n.value={},T.getOrCreateInstance("#arrangement-modal").hide()}catch(e){f.error(e),g.toast(e.message,"error")}}}}},ce={class:"modal-body"},de=o("label",{for:"vase",class:"form-label fst-italic"},"Vase Price...",-1),ue={class:"input-group mb-3"},_e=o("span",{class:"input-group-text"},"$",-1),me=o("button",{class:"btn btn-primary mb-3",type:"button","data-bs-toggle":"collapse","data-bs-target":"#budget-input","aria-expanded":"false","aria-controls":"budget-input"}," Budget? ",-1),fe={class:"collapse",id:"budget-input"},ge={class:"mb-3 input-group"},be=o("span",{class:"input-group-text"},"$",-1),pe=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),o("button",{type:"submit",class:"btn btn-primary"},"Save")],-1);function he(n,e,t,r,s,i){return l(),c("form",{onSubmit:e[2]||(e[2]=P((...a)=>r.createArrangement&&r.createArrangement(...a),["prevent"]))},[o("div",ce,[de,o("div",ue,[_e,v(o("input",{type:"number",class:"form-control",step:"0.01",min:"0.01","aria-label":"Amount (to the nearest dollar)","onUpdate:modelValue":e[0]||(e[0]=a=>r.editable.vasePrice=a),required:"",id:"vase","aria-describedby":"vase-price"},null,512),[[w,r.editable.vasePrice]])]),me,o("div",fe,[o("div",ge,[be,v(o("input",{type:"number",step:"0.01",class:"form-control",id:"budget",placeholder:"Budget...","onUpdate:modelValue":e[1]||(e[1]=a=>r.editable.budget=a)},null,512),[[w,r.editable.budget]])])])]),pe],32)}var ve=m(le,[["render",he]]),we=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ve});function ye(){return(new Date().getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16)).toLowerCase()}class xe{create(e){e.id=ye(),d.flowers.unshift(e)}remove(e){d.flowers=d.flowers.filter(t=>t.id!==e)}edit(e,t){let r=d.flowers.find(s=>s.id==e);t?r.quantity++:!t&&r.quantity>1&&r.quantity--}}const E=new xe,$e={props:{flower:{type:Object,required:!0},total:{type:String,required:!0}},setup(n){return{arrangement:b(()=>d.arrangement),editFlower(e){try{E.edit(n.flower.id,e)}catch(t){f.error(t),g.toast(t.message,"error")}},async removeFlower(){if(await g.confirm())try{E.remove(n.flower.id),T.getOrCreateInstance("#edit-flower-modal-"+n.flower.id).hide(),g.toast(`${n.flower.name} removed.`,"warning","bottom-end")}catch(e){f.error(e),g.toast(e.message,"error")}}}}},Se={class:"modal-body"},ke={class:"d-flex justify-content-between mb-3"},Ae={class:"d-flex justify-content-between align-items-center"},Ce=o("i",{class:"mdi mdi-minus"},null,-1),Ee=[Ce],qe={class:"fs-3 mx-3"},Fe=o("i",{class:"mdi mdi-plus"},null,-1),Oe=[Fe],Te={class:"modal-footer d-flex justify-content-between"},Pe=o("button",{class:"btn btn-success text-light","data-bs-dismiss":"modal"}," Save ",-1);function je(n,e,t,r,s,i){return l(),c($,null,[o("div",Se,[o("div",ke,[o("span",null,u(r.arrangement.budget?"Budget:":"Total:"),1),o("span",{class:j(["fw-bold",{"text-danger":r.arrangement.budget&&t.total<0}])},"$"+u(t.total),3)]),o("div",Ae,[o("span",null,u(t.flower.name)+": $"+u(t.flower.price.toFixed(2))+" each",1),o("span",null,[o("button",{class:"btn btn-warning",onClick:e[0]||(e[0]=a=>r.editFlower(!1))},Ee),o("span",qe,u(t.flower.quantity),1),o("button",{class:"btn btn-warning",onClick:e[1]||(e[1]=a=>r.editFlower(!0))},Oe)])])]),o("div",Te,[o("button",{class:"btn btn-outline-danger",onClick:e[2]||(e[2]=a=>r.removeFlower())}," Delete "),Pe])],64)}var Ie=m($e,[["render",je]]),Me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ie});const Ne={props:{flower:{type:Object,required:!0},total:{type:String,required:!0}},setup(){return{}}},Le=["data-bs-target"],Be={class:"d-flex align-items-center"},De=C("Edit Flower");function Ve(n,e,t,r,s,i){const a=p("EditFlower"),_=p("Modal");return l(),c($,null,[o("div",{class:"d-flex justify-content-between align-items-center text-dark mx-1 mb-3 selectable","data-bs-toggle":"modal","data-bs-target":"#edit-flower-modal-"+t.flower.id},[o("span",Be,u(t.flower.quantity)+" "+u(t.flower.name)+":",1),o("span",null,"$ "+u((t.flower.price*t.flower.quantity).toFixed(2)),1)],8,Le),h(_,{id:"edit-flower-modal-"+t.flower.id},{"modal-header":S(()=>[De]),"modal-body":S(()=>[h(a,{flower:t.flower,total:t.total},null,8,["flower","total"])]),_:1},8,["id"])],64)}var ze=m(Ne,[["render",Ve]]),He=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ze});const Ue={setup(){const n=O({});return{editable:n,createFlower(){try{E.create(n.value),g.toast(`Added ${n.value.name}`,"success","bottom"),n.value={}}catch(e){f.error(e),g.toast(e.message,"error")}}}}},x=n=>(k("data-v-4d7d20ba"),n=n(),A(),n),Re={class:"mb-3"},Ke=x(()=>o("label",{for:"name",class:"form-label fst-italic text-light"},[o("div",{class:"text-shadow"},"Flower Name...")],-1)),We={class:"mb-3 d-flex justify-content-between"},Ge={class:"small-input"},Ye=x(()=>o("label",{for:"quantity",class:"form-label fst-italic text-light"},"Quantity...",-1)),Qe={class:"medium-input"},Je=x(()=>o("label",{for:"price",class:"form-label fst-italic text-light"},"Price...",-1)),Xe={class:"input-group"},Ze=x(()=>o("span",{class:"input-group-text"},"$",-1)),et=x(()=>o("div",{class:"d-flex justify-content-end mt-3"},[o("button",{class:"btn btn-success text-light border border-light fs-3"},[o("i",{class:"mdi mdi-plus"})])],-1));function tt(n,e,t,r,s,i){return l(),c("form",{class:"px-2",onSubmit:e[3]||(e[3]=P(a=>r.createFlower(),["prevent"]))},[o("div",Re,[Ke,v(o("input",{type:"text",class:"form-control",id:"name","aria-describedby":"flower-name","onUpdate:modelValue":e[0]||(e[0]=a=>r.editable.name=a),required:""},null,512),[[w,r.editable.name]])]),o("div",We,[o("div",Ge,[Ye,v(o("input",{type:"number",min:"1",class:"form-control",id:"quantity",step:"0.01","aria-describedby":"flower-quantity","onUpdate:modelValue":e[1]||(e[1]=a=>r.editable.quantity=a),required:""},null,512),[[w,r.editable.quantity]])]),o("div",Qe,[Je,o("div",Xe,[Ze,v(o("input",{type:"number",step:"0.01",min:"0.01",class:"form-control",id:"price","aria-describedby":"flower-price","onUpdate:modelValue":e[2]||(e[2]=a=>r.editable.price=a),required:""},null,512),[[w,r.editable.price]])])])]),et],32)}var ot=m(Ue,[["render",tt],["__scopeId","data-v-4d7d20ba"]]),nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ot});const rt="modulepreload",B={},st="/",at=function(e,t){return!t||t.length===0?e():Promise.all(t.map(r=>{if(r=`${st}${r}`,r in B)return;B[r]=!0;const s=r.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":rt,s||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),s)return new Promise((_,U)=>{a.addEventListener("load",_),a.addEventListener("error",U)})})).then(()=>e())};function it(n){switch(n){case"./pages/HomePage.vue":return at(()=>import("./HomePage.de706722.js"),["assets/HomePage.de706722.js","assets/vendor.81f5fa88.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+n)))})}}function q(n){return()=>it(`./pages/${n}.vue`)}const lt=[{path:"/",name:"Home",component:q("HomePage")},{path:"/about",name:"About",component:q("AboutPage")},{path:"/account",name:"Account",component:q("AccountPage"),beforeEnter:G}],ct=K({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:W(),routes:lt});Y.create({baseURL:N,timeout:8e3});const dt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class ut{constructor(e=!1,t=N){}on(e,t){var r;return(r=this.socket)==null||r.on(e,t.bind(this)),this}onConnected(e){f.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){f.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(dt.authenticate,e)}onError(e){f.error("[SOCKET_ERROR]",e)}enqueue(e,t){f.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){f.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class _t extends ut{constructor(){super();this.on("error",this.onError)}onError(e){g.toast(e.message,"error")}}new _t;const D=Q({});const mt={setup(){return{user:b(()=>d.user),account:b(()=>d.account),async login(){D.loginWithPopup()},async logout(){D.logout({returnTo:window.location.origin})}}}},V=n=>(k("data-v-f7b5cf20"),n=n(),A(),n),ft={class:"navbar-text"},gt={key:1,class:"dropdown my-2 my-lg-0"},bt={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},pt={key:0},ht=["src"],vt={class:"mx-3 text-success lighten-30"},wt={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},yt=V(()=>o("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),xt=V(()=>o("i",{class:"mdi mdi-logout"},null,-1)),$t=C(" logout "),St=[xt,$t];function kt(n,e,t,r,s,i){const a=p("router-link");return l(),c("span",ft,[r.user.isAuthenticated?(l(),c("div",gt,[o("div",bt,[r.account.picture?(l(),c("div",pt,[o("img",{src:r.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,ht),o("span",vt,u(r.account.name),1)])):J("",!0)]),o("div",wt,[h(a,{to:{name:"Account"}},{default:S(()=>[yt]),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(..._)=>r.logout&&r.logout(..._))},St)])])):(l(),c("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(..._)=>r.login&&r.login(..._))}," Login "))])}var At=m(mt,[["render",kt],["__scopeId","data-v-f7b5cf20"]]),Ct=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:At});const Et={setup(){return{}}},qt={class:"modal fade",tabindex:"-1","aria-hidden":"true"},Ft={class:"modal-dialog modal-dialog-centered"},Ot={class:"modal-content text-dark"},Tt={class:"modal-header"},Pt=o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1);function jt(n,e,t,r,s,i){return l(),c("div",qt,[o("div",Ft,[o("div",Ot,[o("div",Tt,[I(n.$slots,"modal-header",{class:"modal-title"}),Pt]),I(n.$slots,"modal-body")])])])}var It=m(Et,[["render",jt]]),Mt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:It});const Nt={setup(){return{}}},Lt=n=>(k("data-v-727d9c5e"),n=n(),A(),n),Bt={class:"navbar navbar-expand-lg navbar-dark bg-warning px-3"},Dt=Lt(()=>o("div",{class:"d-flex flex-column align-items-center"},[o("h1",{class:"fw-bold fst-italic"},"Adoral")],-1));function Vt(n,e,t,r,s,i){const a=p("router-link");return l(),c("nav",Bt,[h(a,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:S(()=>[Dt]),_:1})])}var zt=m(Nt,[["render",Vt],["__scopeId","data-v-727d9c5e"]]),Ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:zt});const Ut={props:{arrangement:{type:Object,required:!0}},setup(n){return{flowers:b(()=>d.flowers.sort((e,t)=>t.price-e.price)),total:b(()=>{let e=0;return n.arrangement.budget?(e=n.arrangement.budget,e-=n.arrangement.vasePrice,e*=.75,d.flowers.forEach(t=>{e-=t.price*t.quantity})):(e+=n.arrangement.vasePrice,d.flowers.forEach(t=>{e+=t.price*t.quantity/.75})),e.toFixed(2)})}}},z=n=>(k("data-v-9e2396ac"),n=n(),A(),n),Rt={class:"m-2 bg-glass border border-info rounded p-2 grow"},Kt={class:"d-flex justify-content-between text-dark border-bottom border-dark sticky-top mx-1 mb-3 fs-3"},Wt=z(()=>o("span",null,"Total:",-1)),Gt={key:0},Yt={key:1},Qt={class:"overflow"},Jt={class:"d-flex justify-content-between text-dark mb-2 mx-1"},Xt=z(()=>o("span",null,"Vase:",-1));function Zt(n,e,t,r,s,i){const a=p("Flower");return l(),c("div",Rt,[o("div",Kt,[Wt,t.arrangement.budget?(l(),c("span",Yt,[o("span",{class:j({"text-danger":r.total<0})}," $ "+u(r.total),3),C(" / $ "+u(t.arrangement.budget.toFixed(2)),1)])):(l(),c("span",Gt,"$ "+u(r.total),1))]),o("div",Qt,[o("div",Jt,[Xt,o("span",null,"$ "+u(t.arrangement.vasePrice.toFixed(2)),1)]),(l(!0),c($,null,X(r.flowers,_=>(l(),Z(a,{key:_.id,flower:_,total:r.total},null,8,["flower","total"]))),128))])])}var eo=m(Ut,[["render",Zt],["__scopeId","data-v-9e2396ac"]]),to=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:eo});function oo(n){Object.entries({"./components/ArrangementForm.vue":we,"./components/EditFlower.vue":Me,"./components/Flower.vue":He,"./components/FlowerForm.vue":nt,"./components/Login.vue":Ct,"./components/Modal.vue":Mt,"./components/Navbar.vue":Ht,"./components/SaleStub.vue":to}).forEach(([t,r])=>{const s=r.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");n.component(s,r.default)})}const H=ee(ae);oo(H);H.use(ct).mount("#app");export{d as A,g as P,m as _,f as l};
